{"ast":null,"code":"var _jsxFileName = \"/Users/han/\\u7F16\\u7A0B/to-do-list-github/to-do-list-Hanbing/frontend/src/components/mainPage/MainPage.js\";\nimport React, { useState, useContext, useEffect } from 'react';\nimport TagBar from './TagBar/TagBar';\nimport List from './List/List';\nimport { AuthContext } from '../../context/AuthContext';\nimport { useHttpClient } from \"../../hooks/http-hook\";\nimport { SearchContext } from '../../context/SearchContext';\nimport './MainPage.css';\n\nconst MainPage = () => {\n  const auth = useContext(AuthContext);\n  const {\n    searchInput,\n    searchInputHandler\n  } = useContext(SearchContext);\n  console.log(!searchInput);\n  const userId = auth.userId;\n  console.log(userId);\n  const {\n    isLoading,\n    error,\n    sendRequest,\n    clearError\n  } = useHttpClient();\n  const [loadedItems, setLoadedItems] = useState([]);\n  const [searchResult, setSearchResult] = useState([]);\n\n  const itemDeleteHandler = deletedItemId => {\n    setLoadedItems(prevItems => {\n      prevItems.filter(i => i._id !== deletedItemId);\n    });\n  };\n\n  useEffect(() => {\n    const fetchItems = async () => {\n      try {\n        const responseData = await sendRequest(`http://localhost:5000/api/items/${userId}`);\n        setLoadedItems(responseData.items);\n        console.log(loadedItems);\n      } catch (err) {}\n    };\n\n    fetchItems();\n  }, [sendRequest, auth]); // if(!!searchInput){\n\n  useEffect(() => {\n    const searchItems = async () => {\n      try {\n        const responseData = await sendRequest(`http://localhost:5000/api/items/${userId}/search`, 'GET', {\n          body: JSON.stringify({\n            keyword: searchInput\n          })\n        }, {\n          Authorization: 'Bearer ' + auth.token\n        });\n        setSearchResult(responseData.items);\n        console.log(searchResult);\n      } catch (err) {}\n    };\n\n    searchItems();\n  }, [sendRequest, searchInput]); // useEffect(() => {\n  //   const searchItem = (keyword) =>{\n  //     setLoadedItems((prevItems)=>{\n  //       prevItems.filter(i=> i.title.toLowerCase().includes(keyword.toLowerCase())  )\n  //     })}\n  //     if(!!searchInput && loadedItems){\n  //       searchItem(searchInput);\n  //       console.log(loadedItems)\n  //     };\n  //   }, searchInput)\n  // setIsLoading(true);\n  //   try{\n  //       const response = await fetch(`http://localhost:5000/api/items/${userId}`, \n  //       {\n  //         method: 'GET', \n  //         headers: {\n  //           'Content-Type': 'application/json'\n  //         }, \n  //         Authorization: \"Bearer \" + auth.token\n  //       })\n  //       const responseData = await response.json();\n  //       console.log(responseData)\n  //       setLoadedItems(responseData.items)\n  //       if (!response.ok) {\n  //         throw new Error(responseData.message);\n  //       }\n  //       setIsLoading(false)\n  //   }catch(err){\n  //     setIsLoading(false);\n  //     setError(err.message || 'Something went wrong, please try again');\n  //     console.log(err)\n  //     }\n  //   }\n  //  fetchItems();\n  // },  [])\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mainContainerOuterBox\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mainContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 10\n    }\n  }, !searchInput && loadedItems && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ListContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(List, {\n    className: \"List\",\n    items: loadedItems,\n    onDeleteItem: itemDeleteHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 19\n    }\n  })), searchInput && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ListContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(List, {\n    className: \"List\",\n    items: searchResult,\n    onDeleteItem: itemDeleteHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 19\n    }\n  }))));\n};\n\nexport default MainPage;","map":{"version":3,"sources":["/Users/han/编程/to-do-list-github/to-do-list-Hanbing/frontend/src/components/mainPage/MainPage.js"],"names":["React","useState","useContext","useEffect","TagBar","List","AuthContext","useHttpClient","SearchContext","MainPage","auth","searchInput","searchInputHandler","console","log","userId","isLoading","error","sendRequest","clearError","loadedItems","setLoadedItems","searchResult","setSearchResult","itemDeleteHandler","deletedItemId","prevItems","filter","i","_id","fetchItems","responseData","items","err","searchItems","body","JSON","stringify","keyword","Authorization","token"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,UAA1B,EAAsCC,SAAtC,QAAwD,OAAxD;AACA,OAAOC,MAAP,MAAmB,iBAAnB;AACA,OAAOC,IAAP,MAAiB,aAAjB;AACA,SAASC,WAAT,QAA4B,2BAA5B;AACA,SAASC,aAAT,QAA8B,uBAA9B;AACA,SAASC,aAAT,QAA8B,6BAA9B;AAGA,OAAO,gBAAP;;AAEA,MAAMC,QAAQ,GAAG,MAAM;AAGrB,QAAMC,IAAI,GAAGR,UAAU,CAACI,WAAD,CAAvB;AACA,QAAM;AAAEK,IAAAA,WAAF;AAAeC,IAAAA;AAAf,MAAsCV,UAAU,CAACM,aAAD,CAAtD;AACAK,EAAAA,OAAO,CAACC,GAAR,CAAY,CAACH,WAAb;AAEA,QAAMI,MAAM,GAAGL,IAAI,CAACK,MAApB;AACAF,EAAAA,OAAO,CAACC,GAAR,CAAYC,MAAZ;AAEA,QAAM;AAAEC,IAAAA,SAAF;AAAaC,IAAAA,KAAb;AAAoBC,IAAAA,WAApB;AAAiCC,IAAAA;AAAjC,MAAgDZ,aAAa,EAAnE;AAGA,QAAM,CAACa,WAAD,EAAcC,cAAd,IAAgCpB,QAAQ,CAAC,EAAD,CAA9C;AACA,QAAM,CAACqB,YAAD,EAAeC,eAAf,IAAkCtB,QAAQ,CAAC,EAAD,CAAhD;;AAEA,QAAMuB,iBAAiB,GAAIC,aAAD,IAAkB;AAC1CJ,IAAAA,cAAc,CAAEK,SAAD,IAAa;AAC1BA,MAAAA,SAAS,CAACC,MAAV,CAAiBC,CAAC,IAAIA,CAAC,CAACC,GAAF,KAAUJ,aAAhC;AACD,KAFa,CAAd;AAGD,GAJD;;AAOAtB,EAAAA,SAAS,CAAC,MAAM;AAEd,UAAM2B,UAAU,GAAG,YAAY;AAE3B,UAAI;AACI,cAAMC,YAAY,GAAG,MAAMb,WAAW,CACnC,mCAAkCH,MAAO,EADN,CAAtC;AAIAM,QAAAA,cAAc,CAACU,YAAY,CAACC,KAAd,CAAd;AACAnB,QAAAA,OAAO,CAACC,GAAR,CAAYM,WAAZ;AACD,OAPP,CAOQ,OAAOa,GAAP,EAAY,CAAE;AACvB,KAVH;;AAYAH,IAAAA,UAAU;AACX,GAfQ,EAeN,CAACZ,WAAD,EAAcR,IAAd,CAfM,CAAT,CAvBqB,CAwCvB;;AACAP,EAAAA,SAAS,CAAC,MAAM;AAEd,UAAM+B,WAAW,GAAG,YAAY;AAE9B,UAAI;AACI,cAAMH,YAAY,GAAG,MAAMb,WAAW,CACnC,mCAAkCH,MAAO,SADN,EAEpC,KAFoC,EAGpC;AACGoB,UAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACpBC,YAAAA,OAAO,EAAE3B;AADW,WAAf;AADT,SAHoC,EAOpC;AACE4B,UAAAA,aAAa,EAAE,YAAY7B,IAAI,CAAC8B;AADlC,SAPoC,CAAtC;AAWAjB,QAAAA,eAAe,CAACQ,YAAY,CAACC,KAAd,CAAf;AACAnB,QAAAA,OAAO,CAACC,GAAR,CAAYQ,YAAZ;AACD,OAdP,CAcQ,OAAOW,GAAP,EAAY,CAAE;AACrB,KAjBH;;AAmBIC,IAAAA,WAAW;AACZ,GAtBI,EAsBF,CAAChB,WAAD,EAAcP,WAAd,CAtBE,CAAT,CAzCuB,CAuErB;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAEA;AAQI;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAIA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AAGJ;;AAIE,sBACE;AAAK,IAAA,SAAS,EAAC,uBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAGG;AAAK,IAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAIM,CAACA,WAAD,IAAgBS,WAAhB,iBACD;AAAK,IAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,IAAD;AAAM,IAAA,SAAS,EAAG,MAAlB;AAAyB,IAAA,KAAK,EAAIA,WAAlC;AAA+C,IAAA,YAAY,EAAII,iBAA/D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CALL,EASOb,WAAW,iBACb;AAAK,IAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,IAAD;AAAM,IAAA,SAAS,EAAG,MAAlB;AAAyB,IAAA,KAAK,EAAIW,YAAlC;AAAgD,IAAA,YAAY,EAAIE,iBAAhE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CAVL,CAHH,CADF;AA4BD,CA7JH;;AA+JE,eAAef,QAAf","sourcesContent":["import React, { useState, useContext, useEffect }  from 'react';\nimport TagBar from './TagBar/TagBar';\nimport List from './List/List';\nimport { AuthContext } from '../../context/AuthContext';\nimport { useHttpClient } from \"../../hooks/http-hook\";\nimport { SearchContext } from '../../context/SearchContext';\n\n\nimport './MainPage.css';\n\nconst MainPage = () => {\n\n\n  const auth = useContext(AuthContext);\n  const { searchInput, searchInputHandler } = useContext(SearchContext);\n  console.log(!searchInput)\n\n  const userId = auth.userId;\n  console.log(userId)\n\n  const { isLoading, error, sendRequest, clearError } = useHttpClient();\n\n \n  const [loadedItems, setLoadedItems] = useState([]);\n  const [searchResult, setSearchResult] = useState([]);\n\n  const itemDeleteHandler = (deletedItemId) =>{\n    setLoadedItems((prevItems)=>{\n      prevItems.filter(i => i._id !== deletedItemId)\n    })\n  }\n \n\n  useEffect(() => {\n\n    const fetchItems = async () => {\n\n        try {\n                const responseData = await sendRequest(\n                  `http://localhost:5000/api/items/${userId}`\n                );\n\n                setLoadedItems(responseData.items)\n                console.log(loadedItems)\n              } catch (err) {}\n      };\n\n    fetchItems();\n  }, [sendRequest, auth]);\n\n// if(!!searchInput){\nuseEffect(() => {\n\n  const searchItems = async () => {\n\n    try {\n            const responseData = await sendRequest(\n              `http://localhost:5000/api/items/${userId}/search`, \n              'GET',\n              {\n                 body: JSON.stringify({\n                  keyword: searchInput })\n              },\n              {\n                Authorization: 'Bearer ' + auth.token,\n              }\n            );\n            setSearchResult(responseData.items)\n            console.log(searchResult)\n          } catch (err) {}\n    };\n\n      searchItems()\n    }, [sendRequest, searchInput]);\n\n\n\n\n\n\n\n  // useEffect(() => {\n  //   const searchItem = (keyword) =>{\n  //     setLoadedItems((prevItems)=>{\n  //       prevItems.filter(i=> i.title.toLowerCase().includes(keyword.toLowerCase())  )\n  //     })}\n\n  //     if(!!searchInput && loadedItems){\n  //       searchItem(searchInput);\n  //       console.log(loadedItems)\n      \n  //     };\n    \n  //   }, searchInput)\n\n  \n\n  \n\n\n     \n      // setIsLoading(true);\n\n      //   try{\n      //       const response = await fetch(`http://localhost:5000/api/items/${userId}`, \n      //       {\n      //         method: 'GET', \n      //         headers: {\n      //           'Content-Type': 'application/json'\n      //         }, \n      //         Authorization: \"Bearer \" + auth.token\n      //       })\n      //       const responseData = await response.json();\n      //       console.log(responseData)\n      //       setLoadedItems(responseData.items)\n\n      //       if (!response.ok) {\n      //         throw new Error(responseData.message);\n      //       }\n      //       setIsLoading(false)\n\n\n\n      //   }catch(err){\n          \n      //     setIsLoading(false);\n      //     setError(err.message || 'Something went wrong, please try again');\n      //     console.log(err)\n          \n      //     }\n      //   }\n   \n      //  fetchItems();\n     \n\n  // },  [])\n\n\n\n    return (\n      <div className='mainContainerOuterBox'>\n  \n\n         <div className='mainContainer'>\n              {/* <div className='TagBarContainer'>\n                <TagBar className = 'TagBar' items = {loadedItems} />\n              </div> */}\n              {!searchInput && loadedItems && (\n              <div className='ListContainer'>\n                  <List className = 'List' items = {loadedItems} onDeleteItem = {itemDeleteHandler}/>\n              </div>\n              )}\n               {searchInput  && (\n              <div className='ListContainer'>\n                  <List className = 'List' items = {searchResult} onDeleteItem = {itemDeleteHandler}/>\n              </div>\n              )}\n              {/* {searchInput  (\n              <div className='ListContainer'>\n                  <List className = 'List' items = {loadedItems} onDeleteItem = {itemDeleteHandler}/>\n              </div>\n              )} */}\n              </div>\n           </div>\n         \n     \n    );\n  }\n  \n  export default MainPage;\n  "]},"metadata":{},"sourceType":"module"}