{"ast":null,"code":"var _jsxFileName = \"/Users/han/\\u7F16\\u7A0B/to-do-list-github/to-do-list-Hanbing/frontend/src/components/modals/AddItemModal.js\";\nimport React, { useState, useContext } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport AddItemButtons from './modalButtons/AddItemButtons';\nimport { AuthContext } from '../../context/AuthContext';\nimport AddTagModal from './AddTagModal';\nimport './AddItemModal.css';\n\nconst AddItemModal = props => {\n  const history = useHistory();\n  const auth = useContext(AuthContext);\n  const userId = auth.userId;\n  const token = auth.token;\n  const [error, setError] = useState(null);\n  const [addTagModalOpen, setAddTagModalOpen] = useState(false);\n  const [tags, setTags] = useState([]);\n  const [onsubmit, setOnsubmit] = useState(false);\n\n  const openAddTagModal = () => {\n    setAddTagModalOpen(true);\n  };\n\n  const closeAddTagModal = () => {\n    setAddTagModalOpen(false);\n  };\n\n  const [inputData, setInputData] = useState({\n    taskName: '',\n    taskDate: undefined,\n    taskTag: ''\n  });\n\n  const addTagHandler = props => {\n    const addedTags = tags.push(props);\n    setTags(addedTags);\n  };\n\n  const inputChangeHandler = event => {\n    const value = event.target.value;\n    setInputData({ ...inputData,\n      [event.target.name]: value\n    });\n  };\n\n  const submitHandler = async event => {\n    event.preventDefault();\n    console.log(inputData);\n    console.log(userId);\n    console.log(token);\n    setOnsubmit(!onsubmit);\n    history.push('/');\n\n    try {\n      const response = await fetch(`http://localhost:5000/api/items/${userId}`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        Authorization: \"Bearer \" + auth.token,\n        body: JSON.stringify({\n          title: inputData.taskName,\n          date: inputData.taskDate,\n          tags: [{\n            name: inputData.taskTag\n          }]\n        })\n      });\n      const responseData = await response.json();\n      console.log(responseData);\n      props.switch();\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"addItemModal__container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    className: \"addItemForm\",\n    method: \"post\",\n    onSubmit: submitHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"addItemForm__taskNameContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"taskName\",\n    placeholder: \"Add a task\",\n    value: inputData.taskName,\n    onChange: inputChangeHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"addItemForm__taskButtonsContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"taskDate\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"date\",\n    name: \"taskDate\",\n    value: inputData.taskDate,\n    onChange: inputChangeHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"taskTag\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"taskTag\",\n    placeholder: \"Add a tag\",\n    value: inputData.taskTag,\n    onChange: inputChangeHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cancelTask addTaskButtonBox\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(AddItemButtons, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 29\n    }\n  }, \"Cancel\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"addTask addTaskButtonBox\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(AddItemButtons, {\n    inverse: true,\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 29\n    }\n  }, \"Add Task\"))))));\n};\n\nexport default AddItemModal;","map":{"version":3,"sources":["/Users/han/编程/to-do-list-github/to-do-list-Hanbing/frontend/src/components/modals/AddItemModal.js"],"names":["React","useState","useContext","useHistory","AddItemButtons","AuthContext","AddTagModal","AddItemModal","props","history","auth","userId","token","error","setError","addTagModalOpen","setAddTagModalOpen","tags","setTags","onsubmit","setOnsubmit","openAddTagModal","closeAddTagModal","inputData","setInputData","taskName","taskDate","undefined","taskTag","addTagHandler","addedTags","push","inputChangeHandler","event","value","target","name","submitHandler","preventDefault","console","log","response","fetch","method","headers","Authorization","body","JSON","stringify","title","date","responseData","json","switch","err"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from 'react';\nimport { useHistory } from 'react-router-dom';\n\nimport AddItemButtons from './modalButtons/AddItemButtons';\nimport { AuthContext } from '../../context/AuthContext';\nimport AddTagModal from './AddTagModal';\n\n\nimport './AddItemModal.css';\n\n\n\nconst AddItemModal = props =>{\n    const history = useHistory();\n    const auth = useContext(AuthContext);\n    const userId = auth.userId;\n    const token = auth.token\n\n\n    const [error, setError] = useState(null);\n    const [addTagModalOpen, setAddTagModalOpen] = useState(false);\n    const [tags, setTags] = useState([]);\n    const [onsubmit, setOnsubmit] = useState(false);\n\n    const openAddTagModal = () =>{\n      setAddTagModalOpen(true)\n    };\n\n    const closeAddTagModal = () =>{\n      setAddTagModalOpen(false)\n    }\n\n    \n    const [inputData, setInputData] = useState({\n        taskName: '', \n        taskDate: undefined,\n        taskTag: ''\n      });\n\n      const addTagHandler = (props) =>{\n        const addedTags = tags.push(props)\n        setTags(addedTags);\n      }\n    \n    \n      const inputChangeHandler =(event)=>{\n        const value = event.target.value\n        setInputData({ \n          ...inputData,\n          [event.target.name]: value\n    \n        })\n    };\n\n    const submitHandler = async (event) =>{\n        event.preventDefault();\n        console.log(inputData);\n        console.log(userId);\n        console.log(token);\n        setOnsubmit(!onsubmit);\n        history.push('/')\n        \n\n    try{\n        const response = await fetch( `http://localhost:5000/api/items/${userId}`, {\n        method: 'POST', \n        headers: {\n          'Content-Type': 'application/json'\n        }, \n        Authorization: \"Bearer \" + auth.token,\n        body: JSON.stringify({\n          title: inputData.taskName, \n          date: inputData.taskDate,\n          tags: [{name: inputData.taskTag}]\n\n        })\n      })\n\n      const responseData= await response.json();\n      console.log(responseData)\n\n    props.switch()\n   \n    }catch(err){\n      console.log(err)\n\n    }\n\n\n    \n      }\n\n    return (\n      <React.Fragment>\n        {/* {addTagModalOpen && <AddTagModal submit = {addTagHandler} close={closeAddTagModal}  />} */}\n\n            <div className=\"addItemModal__container\">\n                <form className='addItemForm' method='post' onSubmit={submitHandler}>\n                    <div className='addItemForm__taskNameContainer'>\n                        <input type =\"text\" name='taskName' placeholder='Add a task' \n                         value = {inputData.taskName} onChange={inputChangeHandler}/>\n                    </div>\n                    <div className='addItemForm__taskButtonsContainer'>\n                        <div className='taskDate'>\n                            <input type =\"date\" name='taskDate' \n                             value = {inputData.taskDate} onChange={inputChangeHandler}/>\n                        </div>\n                        <div className='taskTag'>\n                            <input type =\"text\" name='taskTag' placeholder='Add a tag' \n                             value = {inputData.taskTag} onChange={inputChangeHandler}/>\n                        </div>\n                        {/* <div className='addTag addTaskButtonBox' >\n                            <AddItemButtons onClick= {openAddTagModal} >\n                                Add a Tag\n                            </AddItemButtons>\n                        </div> */}\n                        <div className='cancelTask addTaskButtonBox'>\n                            <AddItemButtons >\n                            Cancel\n                            </AddItemButtons >\n                        </div>\n                        <div className='addTask addTaskButtonBox'>\n                            <AddItemButtons inverse type='submit'>\n                            Add Task\n                            </AddItemButtons>\n                        </div>\n                    </div>\n                    \n                \n                </form>\n            </div>\n            </React.Fragment>\n\n    )\n   \n}\n\n\nexport default AddItemModal;"]},"metadata":{},"sourceType":"module"}