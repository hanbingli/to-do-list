{"ast":null,"code":"var _jsxFileName = \"/Users/han/\\u7F16\\u7A0B/postgraduate/tv2z/to-do-list-Hanbing/backend/frontend/src/components/mainPage/List/ListItem.js\";\nimport React, { useState, useContext } from 'react';\nimport './ListItem.css';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCircle, faEdit, faTrashAlt } from '@fortawesome/free-regular-svg-icons';\nimport { faCircle as faCircleS, faEdit as faEditS, faTrashAlt as faTrashAltS } from '@fortawesome/free-solid-svg-icons';\nimport { AuthContext } from '../../../context/AuthContext';\nimport { useHttpClient } from \"../../../hooks/http-hook\";\nimport EditItemModal from '../../modals/EditItemModal';\nimport Backdrop from '../../modals/Backdrop';\n\nconst ListItem = async props => {\n  const tag = props.tags[0];\n  const auth = useContext(AuthContext);\n  const {\n    isLoading,\n    error,\n    sendRequest,\n    clearError\n  } = useHttpClient();\n  const [editItemModalOpen, setEditItemModalOpen] = useState(false);\n  const userId = props.userId;\n  const itemId = props.id;\n  const isCompleted = props.completed;\n  console.log(userId);\n  console.log(itemId);\n  const [completed, setCompleted] = useState(isCompleted);\n\n  const completeHandler = async () => {\n    try {\n      await sendRequest(`http://localhost:5000/api/items/${itemId}`, 'PATCH', null, {\n        Authorization: 'Bearer ' + auth.token\n      });\n      setCompleted(true);\n    } catch (err) {} // try{\n    //     const response = await fetch( `http://localhost:5000/api/items/complete/${itemId}`, {\n    //     method: 'PATCH',\n    //     Authorization: \"Bearer \" + auth.token,\n    //   })\n    //   const responseData= await response.json();\n    //   console.log(responseData);\n    //   alert(`Item set to ${responseData.completed}`)\n    //   setCompleted(true)\n    // }catch(err){\n    //   console.log(err)\n    // }\n\n  };\n\n  const cancelCompleteHandler = async () => {\n    try {\n      await sendRequest(`http://localhost:5000/api/items/${itemId}`, 'PATCH', null, {\n        Authorization: 'Bearer ' + auth.token\n      });\n      setCompleted(false);\n    } catch (err) {} // try{\n    //     const response = await fetch( `http://localhost:5000/api/items/complete/${itemId}`, {\n    //     method: 'PATCH',\n    //     Authorization: \"Bearer \" + auth.token,\n    //   })\n    //   const responseData= await response.json();\n    //   console.log(responseData);\n    //   alert(`Item set to ${responseData.completed}`)\n    //   setCompleted(false)\n    // }catch(err){\n    //   console.log(err)\n    // }\n\n  };\n\n  const openEditModal = () => {\n    setEditItemModalOpen(true);\n  };\n\n  const closeEditModal = () => {\n    setEditItemModalOpen(false);\n  };\n\n  const deleteHandler = async () => {\n    try {\n      await sendRequest(`http://localhost:5000/api/items/${userId}/${itemId}`, 'DELETE', null, {\n        Authorization: 'Bearer ' + auth.token\n      });\n      props.onDelete(itemId);\n      alert('Item successfully deleted.');\n    } catch (err) {}\n  };\n\n  return /*#__PURE__*/React.createElement(\"li\", {\n    className: \"listItem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"listItem__checkbox listItemContents\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 13\n    }\n  }, !completed && /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faCircle,\n    size: \"2x\",\n    className: \"not-completed listItemContents\",\n    onClick: completeHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 25\n    }\n  }), completed && /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faCircleS,\n    size: \"2x\",\n    className: \"completed listItemContents\",\n    onClick: cancelCompleteHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 22\n    }\n  }), editItemModalOpen && /*#__PURE__*/React.createElement(EditItemModal, {\n    onClose: closeEditModal,\n    userId: userId,\n    itemId: itemId,\n    taskName: props.title,\n    tag: tag.name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 21\n    }\n  }), editItemModalOpen && /*#__PURE__*/React.createElement(Backdrop, {\n    onClick: closeEditModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 20\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"listItem__content__info1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 18\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"listItem__title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 21\n    }\n  }, props.title), tag && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"listItem__tags\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 31\n    }\n  }, tag.name)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"listItem__content__info2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"listItem__date\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 21\n    }\n  }, props.date)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"listItem__editButton listItemContents\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 18\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faEditS,\n    size: \"1x\",\n    className: \"editIcon listItemContents\",\n    onClick: openEditModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"listItem__deleteButton listItemContents\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 18\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faTrashAltS,\n    size: \"1x\",\n    className: \"deleteIcon listItemContents\",\n    onClick: deleteHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 21\n    }\n  })));\n};\n\nexport default ListItem;","map":{"version":3,"sources":["/Users/han/编程/postgraduate/tv2z/to-do-list-Hanbing/backend/frontend/src/components/mainPage/List/ListItem.js"],"names":["React","useState","useContext","FontAwesomeIcon","faCircle","faEdit","faTrashAlt","faCircleS","faEditS","faTrashAltS","AuthContext","useHttpClient","EditItemModal","Backdrop","ListItem","props","tag","tags","auth","isLoading","error","sendRequest","clearError","editItemModalOpen","setEditItemModalOpen","userId","itemId","id","isCompleted","completed","console","log","setCompleted","completeHandler","Authorization","token","err","cancelCompleteHandler","openEditModal","closeEditModal","deleteHandler","onDelete","alert","title","name","date"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from 'react';\nimport './ListItem.css';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCircle, faEdit, faTrashAlt } from '@fortawesome/free-regular-svg-icons';\nimport { faCircle as faCircleS, faEdit as faEditS, faTrashAlt as faTrashAltS} from '@fortawesome/free-solid-svg-icons';\nimport { AuthContext } from '../../../context/AuthContext';\nimport { useHttpClient } from \"../../../hooks/http-hook\";\nimport EditItemModal from '../../modals/EditItemModal';\nimport Backdrop from '../../modals/Backdrop'\n\n\nconst ListItem = async (props) =>{\n    const tag = props.tags[0]\n    const auth = useContext(AuthContext);\n    const { isLoading, error, sendRequest, clearError } = useHttpClient();\n    const [editItemModalOpen, setEditItemModalOpen] = useState(false);\n\n    const userId = props.userId\n    const itemId = props.id\n    const isCompleted = props.completed;\n\n    console.log(userId);\n    console.log(itemId)\n\n    const[completed, setCompleted] = useState(isCompleted);\n\n    const completeHandler = async () =>{\n       \n        try {\n          await sendRequest(\n            `http://localhost:5000/api/items/${itemId}`,\n            'PATCH',\n            null,\n            {\n              Authorization: 'Bearer ' + auth.token,\n            }\n          );\n          setCompleted(true);\n          \n        } catch (err) {}\n\n\n\n\n\n\n        // try{\n        //     const response = await fetch( `http://localhost:5000/api/items/complete/${itemId}`, {\n        //     method: 'PATCH',\n        //     Authorization: \"Bearer \" + auth.token,\n        //   })\n    \n        //   const responseData= await response.json();\n        //   console.log(responseData);\n        //   alert(`Item set to ${responseData.completed}`)\n        //   setCompleted(true)\n       \n        // }catch(err){\n        //   console.log(err)\n    \n        // }\n    } \n\n        const cancelCompleteHandler = async() =>{\n\n            try {\n                await sendRequest(\n                  `http://localhost:5000/api/items/${itemId}`,\n                  'PATCH',\n                  null,\n                  {\n                    Authorization: 'Bearer ' + auth.token,\n                  }\n                )\n                setCompleted(false);\n              } catch (err) {}\n\n\n\n\n\n            // try{\n            //     const response = await fetch( `http://localhost:5000/api/items/complete/${itemId}`, {\n            //     method: 'PATCH',\n            //     Authorization: \"Bearer \" + auth.token,\n            //   })\n        \n            //   const responseData= await response.json();\n            //   console.log(responseData);\n            //   alert(`Item set to ${responseData.completed}`)\n            //   setCompleted(false)\n           \n            // }catch(err){\n            //   console.log(err)\n        \n            // }\n            \n            \n        }\n\n      const openEditModal = () =>{\n      \n        setEditItemModalOpen(true);\n    } \n\n    const closeEditModal = () =>{\n      \n        setEditItemModalOpen(false);\n    } \n\n\n\n\n\n\n    const deleteHandler = async() =>{\n\n        try {\n            await sendRequest(\n              `http://localhost:5000/api/items/${userId}/${itemId}`,\n              'DELETE',\n              null,\n              {\n                Authorization: 'Bearer ' + auth.token,\n              }\n            );\n            props.onDelete(itemId)\n            alert('Item successfully deleted.')\n          } catch (err) {}\n  \n    } \n\n\n    return(\n        <li className='listItem'>\n    \n            <div className=\"listItem__checkbox listItemContents\">\n                {!completed && (\n                        <FontAwesomeIcon\n                            icon={faCircle}\n                            size=\"2x\"\n                            className=\"not-completed listItemContents\"\n                            onClick={completeHandler}\n                        />\n                   \n                )\n                }\n                {completed &&(\n                     <FontAwesomeIcon\n                     icon={faCircleS}\n                     size=\"2x\"\n                     className=\"completed listItemContents\"\n                     onClick={cancelCompleteHandler}\n                   />\n                   \n                )}\n                {editItemModalOpen && (\n                    <EditItemModal \n                    onClose = {closeEditModal} \n                    userId={userId} \n                    itemId = {itemId}\n                    taskName = {props.title}\n                    tag = {tag.name}\n                    \n                    />\n                )}\n                 {editItemModalOpen && (\n                   <Backdrop onClick={closeEditModal} />\n                )}\n                 </div>\n                 <div className='listItem__content__info1'>\n                    \n                    <div className='listItem__title'>\n                        {props.title}\n                    </div>\n                    {tag && ( <div className='listItem__tags'>\n                        {tag.name}\n\n                    </div>) }\n                   \n\n                </div>\n                <div className='listItem__content__info2'>\n                    <div className='listItem__date'>\n                        {props.date}\n                    </div>\n                 </div>\n                 <div className ='listItem__editButton listItemContents'>\n                    <FontAwesomeIcon\n                        icon={faEditS}\n                        size=\"1x\"\n                        className=\"editIcon listItemContents\"\n                        onClick={openEditModal}\n                    />\n                 </div>\n                 <div className ='listItem__deleteButton listItemContents'>\n                    <FontAwesomeIcon\n                        icon={faTrashAltS}\n                        size=\"1x\"\n                        className=\"deleteIcon listItemContents\"\n                        onClick={deleteHandler}\n                    />\n                 </div>\n\n\n\n        </li>\n\n    )\n}\nexport default ListItem;"]},"metadata":{},"sourceType":"module"}